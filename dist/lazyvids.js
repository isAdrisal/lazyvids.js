(t=>{window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),document.addEventListener("DOMContentLoaded",()=>{const a={logLevel:t&&t.logLevel?t.logLevel:"silent",ignoreHidden:t&&t.ignoreHidden?t.ignoreHidden:!1,minBandwidth:t&&t.minBandwidth?Number.parseFloat(t.minBandwidth):0,reduceData:t&&t.reduceData?t.reduceData:!1,requirePoster:t&&t.requirePoster?t.requirePoster:!0},f=(e,r="")=>{a.logLevel==="verbose"&&window.console.log(`lazyvids: ${e}`,r)},s=(e,r="")=>{a.logLevel!=="silent"&&window.console.warn(`lazyvids: ${e}`,r)},u=typeof window.IntersectionObserver=="function";let c;if(a.reduceData&&a.minBandwidth&&navigator.connection&&navigator.connection.downlink&&(navigator.connection.downlink<a.minBandwidth||navigator.connection.saveData)){s(`Slow connection (${navigator.connection.downlink}mbps). Lazy autoplay disabled.`);return}const o=e=>{e.playsinline=!0,e.muted=!0,e.autoplay=!0,e.play()!==void 0?e.play().then(()=>e.dataset.lazyvids="loaded").catch(r=>s("Autoplay blocked by browser for:",e)):e.dataset.lazyvids="loaded"},y=e=>{if(e.style&&e.style.display&&e.style.display==="none"||a.ignoreHidden&&e.style&&e.style.visibility&&e.style.visibility==="hidden")return!1;const r=getComputedStyle(e);return r.getPropertyValue("display")==="none"||a.ignoreHidden&&r.getPropertyValue("visibility")==="hidden"?!1:e.parentNode&&e.parentNode!==document?y(e.parentNode):!0},v=(e,r)=>{e.forEach(n=>{window.requestAnimationFrame(()=>{const i=n.target;n.isIntersecting!==!1&&y(i)!==!1&&(o(i),r.unobserve(i))})})};u&&(c=new IntersectionObserver(v));const d=e=>{if(a.requirePoster&&(e.poster===void 0||e.poster==="")){o(e),s("Video missing poster image. Lazy autoplay disabled for:",e);return}if(u===!1){o(e),s("Unsupported browser. Lazy autoplay disabled.");return}e.dataset.lazyvids="unloaded",c.observe(e)},p="video[data-lazyvids]:not([data-lazyvids=loaded])",l=document.querySelectorAll(p);f(`Initialised \u2014 ${l.length} ${l.length===1?"video":"videos"} detected`),l.forEach(e=>d(e));const w=e=>{e.forEach(r=>{r.addedNodes.forEach(n=>{if(n.tagName==="VIDEO"&&n.dataset.lazyvids!==void 0&&n.dataset.lazyvids!=="loaded"){d(n);return}if(n.hasChildNodes()===!1)return;const i=n.querySelectorAll(p);i.length!==0&&i.forEach(g=>d(g))})})},h={childList:!0,subtree:!0};new MutationObserver(w).observe(document,h)})})(window.lazyvidsConfig||{});
