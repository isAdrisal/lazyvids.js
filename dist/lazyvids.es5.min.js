"use strict";(function(configObj){if(window.NodeList&&!NodeList.prototype.forEach){NodeList.prototype.forEach=Array.prototype.forEach}document.addEventListener("DOMContentLoaded",(function(){var config={logLevel:configObj&&configObj.logLevel?configObj.logLevel:"silent",ignoreHidden:configObj&&configObj.ignoreHidden?configObj.ignoreHidden:false,minBandwidth:configObj&&configObj.minBandwidth?Number.parseFloat(configObj.minBandwidth):0,reduceData:configObj&&configObj.reduceData?configObj.reduceData:false,requirePoster:configObj&&configObj.requirePoster?configObj.requirePoster:true};var log=function log(message){var object=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(config.logLevel!=="verbose")return;window.console.log("lazyvids: ".concat(message),object)};var warn=function warn(message){var object=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(config.logLevel==="silent")return;window.console.warn("lazyvids: ".concat(message),object)};var supportsIntersectionObserver=typeof window.IntersectionObserver==="function";var intersectionObserver;if(config.reduceData&&config.minBandwidth&&navigator.connection&&navigator.connection.downlink&&(navigator.connection.downlink<config.minBandwidth||navigator.connection.saveData)){warn("Slow connection (".concat(navigator.connection.downlink,"mbps). Lazy autoplay disabled."));return}var playVideo=function playVideo(video){video.playsinline=true;video.muted=true;video.autoplay=true;if(video.play()!==undefined){video.play().then((function(){return video.dataset.lazyvids="loaded"}))["catch"]((function(error){return warn("Autoplay blocked by browser for:",video)}))}else{video.dataset.lazyvids="loaded"}};var isVisible=function isVisible(element){if(element.style&&element.style.display&&element.style.display==="none")return false;if(config.ignoreHidden&&element.style&&element.style.visibility&&element.style.visibility==="hidden")return false;var styles=getComputedStyle(element);var display=styles.getPropertyValue("display");if(display==="none")return false;if(config.ignoreHidden){var visibility=styles.getPropertyValue("visibility");if(visibility==="hidden")return false}if(element.parentNode&&element.parentNode!==document)return isVisible(element.parentNode);return true};var handleIntersection=function handleIntersection(entries,intersectionObserver){entries.forEach((function(entry){window.requestAnimationFrame((function(){var target=entry.target;if(entry.isIntersecting===false)return;if(isVisible(target)===false)return;playVideo(target);intersectionObserver.unobserve(target)}))}))};if(supportsIntersectionObserver){intersectionObserver=new IntersectionObserver(handleIntersection)}var process=function process(video){if(config.requirePoster&&(video.poster===undefined||video.poster==="")){playVideo(video);warn("Video missing poster image. Lazy autoplay disabled for:",video);return}if(supportsIntersectionObserver===false){playVideo(video);warn("Unsupported browser. Lazy autoplay disabled.");return}video.dataset.lazyvids="unloaded";intersectionObserver.observe(video)};var domSelector="video[data-lazyvids]:not([data-lazyvids=loaded])";var lazyVideos=document.querySelectorAll(domSelector);log("Initialised â€” ".concat(lazyVideos.length," ").concat(lazyVideos.length===1?"video":"videos"," detected"));lazyVideos.forEach((function(video){return process(video)}));var handleMutation=function handleMutation(mutationsList){mutationsList.forEach((function(mutation){mutation.addedNodes.forEach((function(node){if(node.tagName==="VIDEO"&&node.dataset.lazyvids!==undefined&&node.dataset.lazyvids!=="loaded"){process(node);return}if(node.hasChildNodes()===false)return;var nestedLazyvids=node.querySelectorAll(domSelector);if(nestedLazyvids.length===0)return;nestedLazyvids.forEach((function(videoNode){return process(videoNode)}))}))}))};var mutationConfig={childList:true,subtree:true};var mutationObserver=new MutationObserver(handleMutation);mutationObserver.observe(document,mutationConfig)}))})(window.lazyvidsConfig||{});